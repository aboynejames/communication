<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src&#x2F;ttHTML.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0pr2&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0pr2&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/llLogic.html">llLogic</a></li>
            
                <li><a href="..&#x2F;classes/makeProgramme.html">makeProgramme</a></li>
            
                <li><a href="..&#x2F;classes/MasterWatch.html">MasterWatch</a></li>
            
                <li><a href="..&#x2F;classes/PerSwimmer.html">PerSwimmer</a></li>
            
                <li><a href="..&#x2F;classes/pouchdbSettings.html">pouchdbSettings</a></li>
            
                <li><a href="..&#x2F;classes/recordQS.html">recordQS</a></li>
            
                <li><a href="..&#x2F;classes/SwimtimeController.html">SwimtimeController</a></li>
            
                <li><a href="..&#x2F;classes/ttHTML.html">ttHTML</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src&#x2F;ttHTML.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
* Train TImer
*
* Train Timer settings, html code
* @class ttHTML
*
* @package    Train Timer part of open sport project
* @copyright  Copyright (c) 2012 James Littlejohn
* @license    http:&#x2F;&#x2F;www.gnu.org&#x2F;licenses&#x2F;old-licenses&#x2F;gpl-2.0.html
* @version    $Id$
*&#x2F;
var ttHTML = function() {
	this.template = &#x27;default&#x27;;

};

&#x2F;**
* Display checkbox of swimmer
* @method fromswimmers		
*
*&#x2F;	
ttHTML.prototype.fromswimmers = function(swname, swid) {
				
	var swimstarters = &#x27;&lt;li class=&quot;ui-state-default&quot;  id=&quot;&#x27; + swid + &#x27;&quot;&gt;&#x27;;

	swimstarters +=	&#x27;&lt;div id=&quot;perswimmerset&quot; &gt;&#x27;;
	swimstarters +=	&#x27;&lt;ul id=&quot;percontrols&quot;&gt;&#x27;;
	&#x2F;&#x2F;swimstarters +=	&#x27;&lt;li&gt;&lt;a href=&quot;#&quot; id=&quot;stop&quot; title=&quot;&#x27; + swid + &#x27;&quot; &gt;Stop&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;&#x27;;
	swimstarters +=	&#x27;&lt;li&gt;&lt;a href=&quot;#&quot; id=&quot;split&quot; title=&quot;&#x27; + swid + &#x27;&quot; class=&quot;splitbutton&#x27; + swid +&#x27;&quot; &gt;Split&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;&#x27;;
	swimstarters +=	&#x27;&lt;&#x2F;ul&gt;&#x27;;
	swimstarters +=  &#x27;&lt;div id=&quot;pername&quot; &gt;&#x27; + swname + &#x27;&lt;&#x2F;div&gt;&#x27;;
	swimstarters +=	&#x27;&lt;&#x2F;div&gt;&#x27;;
	swimstarters +=	&#x27;&lt;div id=&quot;perrealtime&quot; &gt;&#x27;;
	swimstarters +=	&#x27;&lt;ul id=&quot;splits&#x27; + swid + &#x27;&quot; class=&quot;splits&quot; &gt;&#x27;;
	swimstarters +=	&#x27;&lt;li&gt;&lt;&#x2F;li&gt;&#x27;;
	swimstarters +=	&#x27;&lt;&#x2F;ul&gt;&#x27;;
	swimstarters +=	&#x27;&lt;ul id=&quot;analysis&#x27; + swid + &#x27;&quot; class=&quot;analysis&quot; &gt;&#x27;;
	swimstarters +=	&#x27;&lt;li&gt;&lt;&#x2F;li&gt;&#x27;;
	swimstarters +=	&#x27;&lt;&#x2F;ul&gt;&#x27;; 
	swimstarters +=	&#x27;&lt;&#x2F;div&gt;&#x27;;

	swimstarters += &#x27;&lt;div class=&quot;peranalysis&quot;&gt;&#x27;;
	&#x2F;&#x2F; call function to prepare all links now to 30 days and chart icon
	

	swimstarters += &#x27;&lt;a href=&quot;&quot; id=&quot;peranalysisid&quot; class=&quot;peranalysisid&#x27;+ swid + &#x27;&quot; title=&quot;&#x27; + swid + &#x27;&quot; data-statusanalysis=&quot;on&quot;&gt;Now&lt;&#x2F;a&gt;&#x27;;
	swimstarters += &#x27;&lt;a href=&quot;&quot; id=&quot;perchartid&quot; class=&quot;perchartid&#x27;+ swid + &#x27;&quot; title=&quot;&#x27; + swid + &#x27;&quot; data-statusanalysis=&quot;on&quot;&gt; Chart&lt;&#x2F;a&gt;&#x27;;
	swimstarters += &#x27;&lt;a href=&quot;&quot; id=&quot;persummaryid&quot; class=&quot;persummaryid&#x27;+ swid + &#x27;&quot; title=&quot;&#x27; + swid + &#x27;&quot; data-statusanalysis=&quot;on&quot;&gt; Summary&lt;&#x2F;a&gt;&#x27;;
	swimstarters += &#x27;&lt;a href=&quot;&quot; id=&quot;perbioid&quot; class=&quot;perbioid&#x27;+ swid + &#x27;&quot; title=&quot;&#x27; + swid + &#x27;&quot; data-statusanalysis=&quot;on&quot;&gt; Bio-stats&lt;&#x2F;a&gt;&#x27;;
	swimstarters += &#x27;&lt;&#x2F;div&gt;&#x27;;

	swimstarters += &#x27;&lt;div class=&quot;peredit&quot;&gt;&#x27;;
	swimstarters += &#x27;&lt;form class=&quot;biostats-form&quot; id=&quot;&#x27; + swid + &#x27;&quot; &gt;&lt;label&gt;HR&lt;&#x2F;label&gt;&lt;input id=&quot;hrin&#x27; + swid + &#x27;&quot; type=&quot;number&quot; title=&quot;heartrate&quot;  size=&quot;4&quot; &#x2F;&gt;&lt;label&gt;SC&lt;&#x2F;label&gt;&lt;input id=&quot;scin&#x27; + swid + &#x27;&quot; type=&quot;number&quot; title=&quot;strokecount&quot;  size=&quot;4&quot; &#x2F;&gt;&lt;label&gt;Lane&lt;&#x2F;label&gt;&lt;input id=&quot;lanein&#x27; + swid + &#x27;&quot; type=&quot;number&quot; title=&quot;changelane&quot;  size=&quot;4&quot; &#x2F;&gt;&lt;&#x2F;form&gt;&#x27;;
	
	swimstarters +=	&#x27;&lt;div class=&quot;perdetails&quot; &gt;&#x27;;
	swimstarters += &#x27;&lt;a href=&quot;&quot; id=&quot;pereditidremove&quot; title=&quot;&#x27; + swid + &#x27;&quot; class=&quot;pereditidremove&#x27;+ swid + &#x27;&quot;&gt;Remove&lt;&#x2F;a&gt;&#x27;;
&#x2F;&#x2F;swimstarters += &#x27;&lt;a href=&quot;&quot; id=&quot;pereditiddelete&quot; title=&quot;&#x27; + swid + &#x27;&quot; class=&quot;pereditiddelete&#x27;+ swid + &#x27;&quot;&gt;Delete&lt;&#x2F;a&gt;&#x27;;
	
	swimstarters +=	&#x27;&lt;&#x2F;div&gt;&#x27;;

	swimstarters += &#x27;&lt;&#x2F;div&gt;&lt;div style=&quot;clear:both;&quot;&gt;&lt;&#x2F;div&gt;&#x27;;

	swimstarters +=	&#x27;&lt;div id=&quot;historicalanalysis&#x27; + swid + &#x27;&quot; class=&quot;historicalplace&quot; &gt;&#x27;;
	swimstarters +=	&#x27;&lt;&#x2F;div&gt;&#x27;;

	swimstarters +=	&#x27;&lt;div id=&quot;historicalchart&#x27; + swid + &#x27;&quot; class=&quot;historicalchart&quot; &gt;&#x27;;
	swimstarters +=	&#x27;&lt;&#x2F;div&gt;&#x27;;
	swimstarters +=	&#x27;&lt;div id=&quot;historicalsummary&#x27; + swid + &#x27;&quot; class=&quot;historicalsummary&quot; &gt;&#x27;;
	swimstarters +=	&#x27;&lt;&#x2F;div&gt;&#x27;;
	swimstarters +=	&#x27;&lt;div id=&quot;historicalbio&#x27; + swid + &#x27;&quot; class=&quot;historicalbio&quot; &gt;&#x27;;				
	swimstarters +=	&#x27;&lt;&#x2F;div&gt;&#x27;;
	swimstarters += &#x27;&lt;div style=&quot;clear:both;&quot;&gt;&lt;&#x2F;div&gt;&lt;&#x2F;li&gt; &#x27;;
		
	return swimstarters;
};

&#x2F;**
* Display checkbox of swimmer
* @method checkboxswimmers		
*
*&#x2F;	
ttHTML.prototype.checkboxswimmers = function(swname, swid) {
				
				var swimliststarters =  &#x27;&lt;input type = &quot;checkbox&quot;   id = &quot;&#x27;+swid+&#x27;&quot;  class=&quot;check-style&quot; value = &quot;&#x27;+swname+&#x27;&quot;  &#x2F;&gt;&#x27;+swname + &#x27; &lt;br &gt;&#x27;;
	
				return swimliststarters;
};			

&#x2F;**
* Display analysis data
* @method checkboxswimmers		
*
*&#x2F;			
ttHTML.prototype.viewdataHeader = function(swimmerlist) {
	
	var viewdatahead = &#x27;&lt;br &#x2F;&gt;&#x27;;
	viewdatahead += &#x27;&lt;select id=&quot;theswimmerview&quot;&gt;&#x27;;
	viewdatahead += &#x27;&lt;option value=&quot;-&quot;&gt;-&lt;&#x2F;option&gt;&#x27;;
	
	var swimids = Object.keys(swimmerlist);
	swimids.forEach(function(swlist) {
&#x2F;&#x2F;console.log(swlist);
		viewdatahead += &#x27;&lt;option value=&quot;&#x27;+ swlist +&#x27;&quot;&gt;&#x27;+ swimmerlist[swlist] +&#x27;&lt;&#x2F;option&gt;&#x27;;
	
	});
	
	viewdatahead += &#x27;&lt;&#x2F;select&gt;&#x27;;

	return viewdatahead;
};

&#x2F;**
* Display of splilt and diffence color coded
* @method realtimesplitsdiff
*
*&#x2F;	
	ttHTML.prototype.realtimesplitsdiff = function(thisin, spidint) {
&#x2F;&#x2F;console.log(thisin);
&#x2F;&#x2F;console.log(&#x27;comin into realtiemsplit HTML function&#x27; + spidint)		
				$splive = &#x27;#splits&#x27;+spidint;
				$analysislive = &#x27;#analysis&#x27;+spidint;
		
				&#x2F;&#x2F; what order did this swimmer go off?
				swimpos = thisin.startclock.activeswimmers.indexOf(spidint);
		
				&#x2F;&#x2F; order position times interval time period
				splitlag = swimpos * (thisin.startclock.swiminterval * 1000);
		
				splittimelive = thisin.t[3] + thisin.t[1] - thisin.t[0] - splitlag;
				
				thisin.spid[thisin.splitidlive][1] = splittimelive;
				
				lastsplitpers = thisin.sparray[thisin.splitidlive].slice(-1)[0];
				if(lastsplitpers === undefined)
				{
	&#x2F;&#x2F;console.log(&#x27;if bein called&#x27;);				
					lastsplitpers = splittimelive;
				}
&#x2F;&#x2F;console.log(&#x27;previous split time&#x27;);				
&#x2F;&#x2F;console.log(lastsplitpers);
				
				thisin.sparray[thisin.splitidlive].push(thisin.spid[thisin.splitidlive][1]);
				&#x2F;&#x2F; display splits
				var shortsplitreal = thisin.startclock.format(splittimelive).slice(3,11);
				$($splive).show();
				$(&#x27;&lt;li&gt;&lt;span&gt;&#x27; + thisin.startclock.zero(thisin.spid[spidint][2]) + &#x27;&lt;&#x2F;span&gt; &#x27; + shortsplitreal + &#x27;&lt;&#x2F;li&gt;&#x27;).appendTo($($splive)).slideDown(&#x27;fast&#x27;);
				$($splive).find(&#x27;li&#x27;).removeClass(&#x27;first last&#x27;);
				$($splive).find(&#x27;li:first&#x27;).addClass(&#x27;first&#x27;).end().find(&#x27;li:last&#x27;).addClass(&#x27;last&#x27;);
				&#x2F;&#x2F; perform analysis &amp; display

				lastsplitper = thisin.sparray[thisin.splitidlive].slice(-1)[0];
&#x2F;&#x2F;console.log(&#x27;current split time&#x27;);				
&#x2F;&#x2F;console.log(lastsplitper);				

				lastdifftocompare = thisin.spdiffarray[thisin.splitidlive].slice(-1)[0];				
				if(lastdifftocompare === undefined)
				{
&#x2F;&#x2F;console.log(&#x27;yes if passed&#x27;);					
					lastsplitpers = 0;
				}
&#x2F;&#x2F;console.log(&#x27;last live diff&#x27;);
&#x2F;&#x2F;console.log(lastdifftocompare);

				thedifflive = splittimelive - lastsplitpers;
&#x2F;&#x2F;console.log(&#x27;now diff&#x27;);
&#x2F;&#x2F;console.log(thedifflive);
&#x2F;&#x2F;console.log(thedifflive - lastdifftocompare);				
				thisin.spdiffarray[thisin.splitidlive].push(thedifflive);
				if(thedifflive &gt; lastdifftocompare ) {
						thecolourdiff = &#x27;red&#x27;; }
				else {
						thecolourdiff = &#x27;green&#x27;; }
						
					shortsplitreal = thisin.startclock.format(thedifflive).slice(3,11);
					$($analysislive).show();
					$(&#x27;&lt;li&gt;&lt;span&gt;&#x27; + thisin.startclock.zero(thisin.spid[spidint][2]) + &#x27;&lt;&#x2F;span&gt; &#x27; + shortsplitreal + &#x27;&lt;&#x2F;li&gt;&#x27;).appendTo($($analysislive)).css(&quot;color&quot;, thecolourdiff).slideDown(&#x27;fast&#x27;);
					$($analysislive).find(&#x27;li&#x27;).removeClass(&#x27;first last&#x27;);
					$($analysislive).find(&#x27;li:first&#x27;).addClass(&#x27;first&#x27;).end().find(&#x27;li:last&#x27;).addClass(&#x27;last&#x27;);
					&#x2F;&#x2F;.css(&quot;color&quot;, thecolourdiff)
						

};

&#x2F;**
* Display of splilt and diffence color coded FROM STOP BUTTON
* @method realtimestop		
*
*&#x2F;	
	ttHTML.prototype.realtimestop = function(thisin, stoploc) {
		
			$splitslive = &#x27;#splits&#x27;+stoploc;
			$stoplive = &#x27;#stop&#x27;+stoploc;
			$analysislive = &#x27;#analysis&#x27;+stoploc;
		
		&#x2F;&#x2F; make the total time elasped in ms local to this swimerid
				&#x2F;&#x2F; what order did this swimmer go off?
				swimpos = thisin.startclock.activeswimmers.indexOf(stoploc);
	
				lastsplitpers = &#x27;&#x27;;
				lastsplitpers = thisin.sparray[stoploc].slice(-1)[0];
				&#x2F;&#x2F; order position times interval time period
				stoplag = swimpos * (thisin.startclock.swiminterval * 1000);
		
				stoptimelive = thisin.t[1] - thisin.t[0] - stoplag;
					
				thisin.spid[stoploc][1] = stoptimelive;
				thisin.sparray[stoploc].push(thisin.spid[stoploc][1]);	
							
				(thisin.startclock.$start).text(thisin.startclock.startText);
				
	&#x2F;&#x2F; make this stop&#x2F;split id local to this swimmer				
				thisin.spid[thisin.splitidlive][2]++;
		
		&#x2F;&#x2F; for splits

				if(lastsplitpers === undefined)
				{
	&#x2F;&#x2F;console.log(&#x27;if bein called&#x27;);				
					lastsplitpers = stoptimelive;
				}
&#x2F;&#x2F;console.log(&#x27;previous split time&#x27;);				
&#x2F;&#x2F;console.log(lastsplitpers);
				&#x2F;&#x2F;thisin.sparray[thisin.splitidlive].push(thisin.spid[thisin.splitidlive][1]);		
		
	&#x2F;&#x2F;console.log(&#x27;t2 not equal to zero in stop&#x27;);
					var shortsplitreal = thisin.startclock.format(thisin.spid[stoploc][1]).slice(3,11);
				$($splitslive).show();
				$(&#x27;&lt;li&gt;&lt;span&gt;&#x27; + thisin.startclock.zero(thisin.spid[stoploc][2]) + &#x27;&lt;&#x2F;span&gt; &#x27; + shortsplitreal + &#x27;&lt;&#x2F;li&gt;&#x27;).appendTo($($splitslive)).slideDown(&#x27;fast&#x27;);
				$($splitslive).find(&#x27;li&#x27;).removeClass(&#x27;first last&#x27;);
				$($splitslive).find(&#x27;li:first&#x27;).addClass(&#x27;first&#x27;).end().find(&#x27;li:last&#x27;).addClass(&#x27;last&#x27;);
				
				thisin.t[1] = 0;
				thisin.stoppedlist.push(stoploc);
				thisin.startclock.display();
				
								lastsplitper = thisin.sparray[stoploc].slice(-1)[0];
&#x2F;&#x2F;console.log(&#x27;current split time&#x27;);				
&#x2F;&#x2F;console.log(lastsplitper);				


					lastdifftocompare = thisin.spdiffarray[stoploc].slice(-1)[0];
				if(lastdifftocompare === undefined)
				{
					lastdifftocompare = stoptimelive;
				}
&#x2F;&#x2F;console.log(&#x27;last live diff&#x27;);
&#x2F;&#x2F;console.log(lastdifftocompare);

				thedifflive = stoptimelive - lastsplitpers;
&#x2F;&#x2F;console.log(&#x27;now diff&#x27;);
&#x2F;&#x2F;console.log(thedifflive);
&#x2F;&#x2F;console.log(thedifflive - lastdifftocompare);				
				thisin.spdiffarray[stoploc].push(thedifflive);
				if(thedifflive &gt; lastdifftocompare ) {
						thecolourdiff = &#x27;red&#x27;; }
				else {
						thecolourdiff = &#x27;green&#x27;; }
					if(thisin.spid[stoploc][2] == 1 )
					{
						thedifflive = stoptimelive;
					}
					shortsplitreal = thisin.startclock.format(thedifflive).slice(3,11);
					$($analysislive).show();
					$(&#x27;&lt;li&gt;&lt;span&gt;&#x27; + thisin.startclock.zero(thisin.spid[stoploc][2]) + &#x27;&lt;&#x2F;span&gt; &#x27; + shortsplitreal + &#x27;&lt;&#x2F;li&gt;&#x27;).appendTo($($analysislive)).css(&quot;color&quot;, thecolourdiff).slideDown(&#x27;fast&#x27;);
					$($analysislive).find(&#x27;li&#x27;).removeClass(&#x27;first last&#x27;);
					$($analysislive).find(&#x27;li:first&#x27;).addClass(&#x27;first&#x27;).end().find(&#x27;li:last&#x27;).addClass(&#x27;last&#x27;);
					&#x2F;&#x2F;.css(&quot;color&quot;, thecolourdiff)
		
};
	
	
&#x2F;**
* Display of Analysis post real time
* @method visualiseme		
*
*&#x2F;	
ttHTML.prototype.visualiseme = function(livepouch, swimidin, historicaldata) {
&#x2F;&#x2F;console.log(swimidin);
&#x2F;&#x2F;console.log(&#x27;per sswimmier ananlysis data historical&#x27;);	
&#x2F;&#x2F;console.log(historicaldata);	
	var lastdataid = {};
	var perswimmerdata = {};
	perswimmersort = {};
	&#x2F;&#x2F; give back all data capture locally for now
	perswimmerdata = Object.keys(historicaldata);
	perswimmersort = perswimmerdata.sort(function(a,b){return a-b});
&#x2F;&#x2F;console.log(&#x27;the order of time data???order right&#x27;);
&#x2F;&#x2F;console.log(perswimmersort);	
	var repcounter = &#x27;&#x27;;
	repcounter = 0;
	
	perswimmersort.forEach(function(perswimmersp) {
&#x2F;&#x2F;console.log(perswimmersp);		
		repcounter ++;
		&#x2F;&#x2F; setout new divs
		visualnewdiv = &#x27;&#x27;;
		visualnewdiv += &#x27;&lt;div class=&quot;splitviewcompare&quot; id=&quot;lastcomparesession&#x27; + perswimmersp + swimidin + &#x27;&quot;&gt;&lt;&#x2F;div&gt;&#x27;;
		visualnewdiv += &#x27;&lt;div class=&quot;splitviewrep&quot; id=&quot;lastrep&#x27; + perswimmersp + swimidin + &#x27;&quot;&gt;&#x27; + repcounter +&#x27;&lt;&#x2F;div&gt;&#x27;;
		visualnewdiv += &#x27;&lt;div class=&quot;splitview&quot; id=&quot;splittimeshistorical&#x27; + perswimmersp + swimidin + &#x27;&quot;&gt;&lt;&#x2F;div&gt;&#x27;;
&#x2F;&#x2F;console.log(&#x27;swimmer id coming through&#x27; + perswimmersp);		

		
		$(&quot;#historicalanalysis&quot; + swimidin).prepend(visualnewdiv);
		
		var visualdata = &#x27;&#x27;;
		visualdata = &#x27;Date:&#x27; ;
		visualdata += historicaldata[perswimmersp][&#x27;swiminfo&#x27;][&#x27;swimdate&#x27;];
		visualdata += &#x27; &#x27;; 
		visualdata += historicaldata[perswimmersp][&#x27;swiminfo&#x27;][&#x27;swimstroke&#x27;];
		visualdata += &#x27; &#x27;;
		visualdata += historicaldata[perswimmersp][&#x27;swiminfo&#x27;][&#x27;swimtechnique&#x27;];
		visualdata += &#x27; &#x27;;
		visualdata += historicaldata[perswimmersp][&#x27;swiminfo&#x27;][&#x27;swimstyle&#x27;];
		visualdata += &#x27; &#x27;;			
		visualdata += historicaldata[perswimmersp][&#x27;swiminfo&#x27;][&#x27;swimdistance&#x27;];
		visualdata += &#x27; &#x27;;		
		visualdata += historicaldata[perswimmersp][&#x27;swiminfo&#x27;][&#x27;swimsplit&#x27;];
		visualdata += &#x27;&lt;br &#x2F;&gt;&#x27;;
	
		thesplitdiff = &#x27;&#x27;;
		lastsplitforcompare = &#x27;&#x27;;
		lasttimefornextcalc = &#x27;&#x27;;
		actualsplitdiff = &#x27;&#x27;;
					
		&#x2F;&#x2F; itterate over each array split and format
			historicaldata[perswimmersp][&#x27;splittimes&#x27;].forEach(function (speratesplit) {

			&#x2F;&#x2F; do some maths to get difference, if higher colour red, lower colour green
			&#x2F;&#x2F; if not first number
	&#x2F;&#x2F;console.log(&#x27;incoming split time&#x27; + speratesplit);	
	&#x2F;&#x2F;console.log(&#x27;last splitime if not the first&#x27; + lastsplitforcompare);	
			thesplitdiff = &#x27;&#x27;;
			thesplitdiff =  speratesplit - lasttimefornextcalc;
	&#x2F;&#x2F;console.log(&#x27;the split diff for this run&#x27; + thesplitdiff);			
			actualsplitdiff = speratesplit - lasttimefornextcalc;
			if(thesplitdiff &gt; lastsplitforcompare ) {
			thecolourdiff = &#x27;red&#x27;; }
			else {
			thecolourdiff = &#x27;green&#x27;; }
	&#x2F;&#x2F;console.log(thecolourdiff);						
			&#x2F;&#x2F; last split to keep
			lastsplitforcompare = actualsplitdiff;
			lasttimefornextcalc = speratesplit;
			
			var shortsplit = starttiming.activetimeclock.startclock.format(actualsplitdiff).slice(4,11);
			var shortactualtime = starttiming.activetimeclock.startclock.format(speratesplit).slice(3,11);
			visualdatasph = &#x27;&lt;li&gt;&#x27; + shortactualtime + &#x27; &#x27; + &#x27;split &#x27; + shortsplit + &#x27;&lt;&#x2F;li&gt;&#x27;;
			$(visualdatasph).css(&quot;color&quot;, thecolourdiff).prependTo($(&quot; #splittimeshistorical&quot; + perswimmersp + swimidin ));
				
			thecolourdiff = &#x27;&#x27;;
			visualdatasph = &#x27;&#x27;;
			shortsplit = &#x27;&#x27;;
				
			});
			
			$(&quot;#splittimeshistorical&quot; + perswimmersp + swimidin).prepend(visualdata);
			var compareshortsplit = &#x27;&#x27;;
				&#x2F;&#x2F; visualise the stats between different sessions
			if(lastdataid[&#x27;datasessionid&#x27;])
			{
				&#x2F;&#x2F; do some analaysis  
				netsetcompare =  lasttimefornextcalc - lastdataid[&#x27;splitlasttime&#x27;];
				if(netsetcompare &gt; 0 ) {
					lasttimegetting = &#x27;slower&#x27;;
					comparecolor = &#x27;red&#x27;;					
					compareshortsplit = starttiming.activetimeclock.startclock.format(netsetcompare).slice(3,11);	
					}
				else {
					lasttimegetting = &#x27;faster&#x27;;
					comparecolor = &#x27;green&#x27;;
					compareshortsplit = (netsetcompare&#x2F;1000) + &#x27; seconds&#x27;;
					}
				
				
			$(&quot; #lastcomparesession&quot; + perswimmersp+ swimidin  ).html(&#x27; &#x27; +lasttimegetting + &#x27; by &#x27; + compareshortsplit).css(&quot;color&quot;, comparecolor);
			
			}	
			else
			{
				
			$(&quot; #lastcomparesession&quot; + perswimmersp+ swimidin ).html(&#x27;can only compare itself&#x27;);
			
			}
			
			&#x2F;&#x2F;set data session id for mulit data comparison
			lastdataid[&#x27;datasessionid&#x27;] = perswimmersp;
			lastdataid[&#x27;splitlasttime&#x27;] = lasttimefornextcalc;	
	&#x2F;&#x2F;console.log(lastdataid);
							
	});  &#x2F;&#x2F; closes perswimmer data
};



&#x2F;**
* Display of chart data
* @method visualisechart		
*
*&#x2F;	
ttHTML.prototype.visualisechart = function(livepouch, swimidin, historicaldata) {
&#x2F;&#x2F;console.log(swimidin);
&#x2F;&#x2F;console.log(&#x27;per data for CHART&#x27;);	
&#x2F;&#x2F;console.log(historicaldata);	
	
	&#x2F;&#x2F; need to form x and y axis data array
	var d1 = [];
	var  d22 = [ [0, 3], [4, 8], [8, 5], [9, 44]];
&#x2F;&#x2F;console.log(d22);
	var lastdataid = {};
	var perswimmerdata = {};
	perswimmersort = {};
	&#x2F;&#x2F; give back all data capture locally for now
	perswimmerdata = Object.keys(historicaldata);
	perswimmersort = perswimmerdata.sort(function(a,b){return a-b});
&#x2F;&#x2F;console.log(&#x27;the order of time data???order right&#x27;);
&#x2F;&#x2F;console.log(perswimmersort);	
	var repcounter = &#x27;&#x27;;
	repcounter = 0;
	
	perswimmersort.forEach(function(perswimmersp) {
&#x2F;&#x2F;console.log(&#x27;chart analysis&#x27;);
&#x2F;&#x2F;console.log(perswimmersp);		
		&#x2F;&#x2F; extract last time from each split object
&#x2F;&#x2F;console.log(historicaldata[perswimmersp].splittimes);		
		lasttimetotal = &#x27;&#x27;;
		lasttimetotal = historicaldata[perswimmersp].splittimes.pop();
&#x2F;&#x2F;console.log(lasttimetotal);		
		d1[repcounter] = [perswimmersp, (lasttimetotal&#x2F;1000)];
		repcounter++;
	});
&#x2F;&#x2F;console.log(&#x27;new d1 array&#x27;);
&#x2F;&#x2F;console.log(d1);
	
				(function basic(container, d1) {

&#x2F;&#x2F;console.log(container);
						&#x2F;&#x2F; Draw Graph
						graph = Flotr.draw(container, [d1], {
								xaxis: {
										&#x2F;&#x2F;majorTickFreq: 1
									mode: &#x27;time&#x27;,
									labelsAngle: 45
								},
								grid: {
										&#x2F;&#x2F;minorVerticalLines: true
								},
								yaxis: {
									min: 0
								},
								title: &#x27;Current Times&#x27;
						});
						
&#x2F;&#x2F;console.log(graph);		
		
				})(document.getElementById(container), d1);
	
}

&#x2F;**
* Display summary stats
* @method summaryme		
*
*&#x2F;	
ttHTML.prototype.summaryme = function(livepouch, swimidin, historicaldata) {
&#x2F;&#x2F;console.log(swimidin);
&#x2F;&#x2F;console.log(&#x27;per data for SUMMARY&#x27;);	
&#x2F;&#x2F;console.log(historicaldata);	
	
	totaltimearray = [];

	var repcounter = &#x27;&#x27;;
	repcounter = 0;
	&#x2F;&#x2F; get data info array and sort from there
		var perswimmerdata = Object.keys(historicaldata);
		perswimmerdata.forEach(function(perswimmertime) {
&#x2F;&#x2F;console.log(repcounter);			
&#x2F;&#x2F;console.log(historicaldata[perswimmertime].splittimes.pop());
				lasttimein = &#x27;&#x27;;
			lasttimein = historicaldata[perswimmertime].splittimes.pop();	
&#x2F;&#x2F;console.log(lasttimein);			
			totaltimearray.push(lasttimein);
			repcounter++;
		});

&#x2F;&#x2F;console.log(&#x27;list of last time array&#x27;);	
&#x2F;&#x2F;console.log(totaltimearray);
		
	fasttraining = &#x27;&#x27;;
	slowtraining = &#x27;&#x27;;
	avgtraining = &#x27;&#x27;;
	notimesin = totaltimearray.length;
	sumoftimes = eval(totaltimearray.join(&#x27;+&#x27;));
		
	&#x2F;&#x2F; find fast time
	fastlist = totaltimearray.sort(function(a,b){return b-a});
	fasttraining = fastlist.pop();
	
	&#x2F;&#x2F;find slowest time
	slowlist = totaltimearray.sort(function(a,b){return a-b});
	slowtraining = slowlist.pop();
	
	&#x2F;&#x2F; work out average
&#x2F;&#x2F;console.log(&#x27;lenghtarray==&#x27; + notimesin + &#x27;sumvalueis==&#x27; + sumoftimes);
	avgtraining = sumoftimes&#x2F;notimesin;
	
	summaryhtml = &#x27;&#x27;;
	
	summaryhtml += &#x27;&lt;div class=&quot;trainingstats&quot;&gt;Training&#x27;;
	summaryhtml += &#x27;	&lt;div class=&quot;beststat&quot;&gt;Best &#x27; + starttiming.activetimeclock.startclock.format(fasttraining).slice(4,11) +&#x27;&lt;&#x2F;div&gt;&#x27;;
	summaryhtml += &#x27;	&lt;div class=&quot;slowstat&quot;&gt;Slowest &#x27; + starttiming.activetimeclock.startclock.format(slowtraining).slice(4,11) +&#x27;&lt;&#x2F;div&gt;&#x27;;
	summaryhtml += &#x27;	&lt;div class=&quot;avgstat&quot;&gt;Average &#x27; + starttiming.activetimeclock.startclock.format(avgtraining).slice(4,11) +&#x27;&lt;&#x2F;div&gt;&#x27;;
	summaryhtml += &#x27;	&lt;&#x2F;div&gt;&#x27;;
	summaryhtml += &#x27;	&lt;div class=&quot;seasonbeststats&quot;&gt;Current Season&#x27;;
	summaryhtml += &#x27;	&lt;div class=&quot;beststat&quot;&gt;Best&lt;&#x2F;div&gt;&#x27;;
	summaryhtml += &#x27;	&lt;div class=&quot;slowstat&quot;&gt;Slowest&lt;&#x2F;div&gt;&#x27;;
	summaryhtml += &#x27;	&lt;div class=&quot;avgstat&quot;&gt;Average&lt;&#x2F;div&gt;&#x27;;
	summaryhtml += &#x27;	&lt;&#x2F;div&gt;&#x27;;
	summaryhtml += &#x27;	&lt;div class=&quot;personalbeststats&quot;&gt;Personal Bests&#x27;;
	summaryhtml += &#x27;	&lt;div class=&quot;beststat&quot;&gt;Best&lt;&#x2F;div&gt;&#x27;;
	summaryhtml += &#x27;	&lt;div class=&quot;slowstat&quot;&gt;Slowest&lt;&#x2F;div&gt;&#x27;;
	summaryhtml += &#x27;	&lt;div class=&quot;avgstat&quot;&gt;Average&lt;&#x2F;div&gt;&#x27;;
	summaryhtml += &#x27;	&lt;&#x2F;div&gt;&#x27;;

	$(&quot;#historicalsummary&quot; + swimidin).html(summaryhtml);
	
	
};  &#x2F;&#x2F;closes function	

&#x2F;**
* Display checkbox of swimmer
* @method checkboxswimmers		
*
*&#x2F;	
ttHTML.prototype.checkboxswimmers = function(swname, swid) {
				
				var swimliststarters =  &#x27;&lt;input type = &quot;checkbox&quot;   id = &quot;&#x27;+swid+&#x27;&quot;  class=&quot;check-style&quot; value = &quot;&#x27;+swname+&#x27;&quot;  &#x2F;&gt;&#x27;+swname + &#x27; &lt;br &gt;&#x27;;
	
				return swimliststarters;
};			

&#x2F;**
* Display live communication set
* @method livecommunicationset		
*
*&#x2F;			
ttHTML.prototype.livecommunicationset = function(commlive) {
&#x2F;&#x2F;console.log(commlive);
	presentcommunication = &#x27;&#x27;;
	commlivehtml = &#x27;&#x27;;
						commlive.forEach(function(rowcomm){
&#x2F;&#x2F;console.log(rowcomm.value[2]);
							&#x2F;&#x2F; format the date
						&#x2F;*	var formatdatelive = Date.parse(rowcomm.value[2]);
console.log(formatdatelive);							
							var ssmonth = rowcomm.value[2].getUTCMonth() + 1;
							var ssday = formatdatelive.getUTCDate();
							var ssyear = formatdatelive.getUTCFullYear();
							ssdaterecord = ssday + &#x27;&#x2F;&#x27; + ssmonth + &#x27;&#x2F;&#x27; + ssyear;*&#x2F;
								&#x2F;&#x2F; get the communication data and display programme
								presentcommunication += 1;
								commlivehtml += &#x27;&lt;div class=&quot;swimcommdate&quot;&gt; &lt;a href=&quot;&quot; id=&quot;fpdate&quot; data-dcommid=&quot;&#x27; + rowcomm.key + &#x27;&quot; &gt;&#x27; + rowcomm.value[2] + &#x27;&lt;&#x2F;a&gt; &lt;&#x2F;div&gt;&#x27;;
								
						});
						
	return commlivehtml;
};

&#x2F;**
* Display communication authoring
* @method commelementbuild		
*
*&#x2F;			
ttHTML.prototype.commelementbuild = function(cci) {
	commelemhtml = &#x27;&#x27;;
						
								commelemhtml += &#x27;&lt;div class=&quot;commlistitem&quot; id=&quot;communicationelement&#x27; + cci +&#x27;&quot; data-commid=&quot;&#x27; + cci +&#x27;&quot;&gt;&lt;div id=&quot;comel&#x27; + cci + &#x27;&quot; &gt;&lt;div id=&quot;elementcounter&quot;&gt;&#x27; + cci + &#x27;&lt;&#x2F;div&gt;&lt;div class=&quot;communicationpool&quot;&gt;&lt;div id=&quot;setauthored&#x27; + cci + &#x27;&quot;&gt;&lt;&#x2F;div&gt;&lt;&#x2F;div&gt;&lt;&#x2F;div&gt;&lt;div class=&quot;communicationedit&quot;&gt;&lt;div class=&quot;sketchpadel&quot;&gt;&lt;a href=&quot;&quot; id=&quot;sketchpad&quot; data-sketchid=&quot;&#x27; + cci + &#x27;&quot;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;div&gt;&lt;div class=&quot;saveel&quot;&gt;&lt;a href=&quot;&quot; id=&quot;save&quot;  data-saveid=&quot;&#x27; + cci + &#x27;&quot;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;div&gt;&lt;div class=&quot;removeel&quot;&gt;&lt;a href=&quot;&quot; id=&quot;remove&quot; data-removeid =&quot;&#x27; + cci + &#x27;&quot;&gt;remove&lt;&#x2F;a&gt;&lt;&#x2F;div&gt;&lt;&#x2F;div&gt;&lt;&#x2F;div&gt;&#x27;;
	
	&#x2F;&#x2F; first get the input data 
					commelemhtml += &#x27;&lt;div class=&quot;editswimelement&quot; id=&quot;editdate&#x27; + cci + &#x27;&quot;&gt;&lt;div id=&quot;swimrepetition&quot; &gt;&lt;&#x2F;div&gt; &#x27; + &#x27;&lt;div id=&quot;swimtype&quot;&gt;&lt;&#x2F;div&gt; &lt;div id=&quot;swimstroke&quot;&gt;&lt;&#x2F;div&gt; &lt;div id=&quot;swimdistance&quot;&gt;&lt;&#x2F;div&gt; &lt;div id=&quot;swimtechnique&quot;&gt;&lt;&#x2F;div&gt;&lt;a href=&quot;&quot; id=&quot;edit&quot; data-editid=&quot;&#x27; + cci + &#x27;&quot;&gt;edit&lt;&#x2F;a&gt;&lt;&#x2F;div&gt;&#x27;;

	return commelemhtml;
};


    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
